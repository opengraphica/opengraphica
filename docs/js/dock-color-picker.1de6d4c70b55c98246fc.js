"use strict";(self.webpackChunkOpenGraphica=self.webpackChunkOpenGraphica||[]).push([[7121],{55127:(e,o,a)=>{a.r(o),a.d(o,{default:()=>Z});var t=a(66252),l=a(3577);const n={class:"ogr-dock-content"},i={class:"ogr-dock-mobile-edge-padding"},r={class:"px-4.5 my-4 has-text-centered"},u={class:"px-4.5 my-4 is-flex is-justify-content-center"},c=(0,t._)("span",{class:"bi bi-eyedropper","aria-hidden":"true"},null,-1),d={class:"px-4.5 mt-4 pb-4 has-text-right"};var s=a(2262),p=a(64670),v=a(4752),g=a(97965),m=a(43019),h=a(17765),C=a(53430);const k={class:"ogr-color-picker-gradient"},f={class:"ogr-color-picker-gradient__saturation-value"},y=(0,t._)("div",{class:"ogr-color-picker-gradient__value-gradient"},null,-1),S={ref:"saturationValueHandleContainer",class:"ogr-color-picker-gradient__saturation-value-handle-container"},w={ref:"hueSliderContainer",class:"ogr-color-picker-gradient__hue"};var V=a(78874),b=a(40139),P=a(68444),_=a(67340);const H=(0,t.aZ)({name:"AppColorPickerGradient",directives:{pointer:P.Z},components:{ElSlider:V.ZP},props:{modelValue:{type:Object,default:{is:"color",r:0,g:0,b:0,a:1,style:"#000000"}}},emits:["input","change","update:modelValue"],setup(e,{emit:o}){const a=(0,s.iH)(0),l=(0,s.iH)(1),n=(0,s.iH)(),i=(0,s.iH)(),r=(0,s.iH)({is:"color",h:0,s:0,v:0,a:1,style:"#000000"}),u=(0,s.iH)("rgb(0, 0, 0)");let c="rgba";const d=(0,s.iH)();let p=new DOMRect;const v=(0,s.iH)("rgb(255, 0, 0)");let g=!1;function m(){const e=(0,b.Re)(r.value,c);return u.value=(0,b.nq)({...e,a:1},c,_.default.state.colorSpace),(0,b.nq)(e,c,_.default.state.colorSpace),r.value.style=e.style,e}function h(e){r.value.s=Math.min(1,Math.max(0,(e.clientX-p.left)/p.width)),r.value.v=1-Math.min(1,Math.max(0,(e.clientY-p.top)/p.height));const a=m();o("update:modelValue",a),o("input",a)}function C(e){r.value.h=e,v.value=(0,b.LF)("hsva",{h:a.value,s:1,v:1,a:1},_.default.state.colorSpace).style;const t=m();o("update:modelValue",t),o("input",t)}function k(e){r.value.h=e;const a=m();o("update:modelValue",a),o("change",a)}function f(e){r.value.a=e;const a=m();o("update:modelValue",a),o("input",a)}function y(e){r.value.a=e;const a=m();o("update:modelValue",a),o("change",a)}return(0,t.YP)([(0,s.Vh)(e,"modelValue")],(([e])=>{if(!g){c=(0,b.VT)(e);let o=JSON.parse(JSON.stringify(r.value)),t=(0,b.j_)(e,c);(t.h!==o.h&&0!==t.v||t.s!==o.s&&0!==t.v||t.v!==o.v||t.a!==o.a)&&(r.value=t,t.s>0&&(a.value=r.value.h,v.value=(0,b.LF)("hsva",{h:a.value,s:1,v:1,a:1},_.default.state.colorSpace).style),l.value=r.value.a,u.value=(0,b.nq)({...r.value,a:1},"hsva",_.default.state.colorSpace))}}),{immediate:!0}),{hue:a,opacity:l,hueSliderContainer:n,opacitySliderContainer:i,saturationValueHandleContainer:d,saturationValueGradientColorStyle:v,pickedColorOpaqueStyle:u,pickedColor:r,onPointerDownSaturationValueGradient:function(e){d.value&&(p=d.value.getBoundingClientRect(),h(e),g=!0)},onPointerMoveSaturationValueGradient:function(e){g&&h(e)},onPointerUpSaturationValueGradient:function(e){if(g){const e=m();o("change",e)}g=!1},onInputHueSlider:C,onChangeHueSlider:k,onInputOpacitySlider:f,onChangeOpacitySlider:y,onPointerDownHueSliderContainer:async function(e){if(e.target===n.value){const o=n.value?.getBoundingClientRect();e.clientX>o.left+o.width/2?a.value=.999:a.value=0,await(0,t.Y3)(),C(a.value),k(a.value)}},onPointerDownOpacitySliderContainer:async function(e){if(e.target===i.value){const o=i.value?.getBoundingClientRect();e.clientX>o.left+o.width/2?l.value=1:l.value=0,await(0,t.Y3)(),f(l.value),y(l.value)}}}}});var D=a(83744);const x=(0,D.Z)(H,[["render",function(e,o,a,n,i,r){const u=(0,t.up)("el-slider"),c=(0,t.Q2)("pointer");return(0,t.wg)(),(0,t.iD)("div",k,[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",{class:"ogr-color-picker-gradient__saturation-gradient",style:(0,l.normalizeStyle)({"--ogr-color-pick-hue":e.saturationValueGradientColorStyle})},null,4),y,(0,t._)("div",S,[(0,t._)("div",{class:"ogr-color-picker-gradient__saturation-value-handle",style:(0,l.normalizeStyle)({top:100*(1-e.pickedColor.v)+"%",left:100*e.pickedColor.s+"%"})},null,4)],512)])),[[c,e.onPointerDownSaturationValueGradient,void 0,{down:!0}],[c,e.onPointerMoveSaturationValueGradient,void 0,{move:!0,window:!0}],[c,e.onPointerUpSaturationValueGradient,void 0,{up:!0,window:!0}]]),(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(u,{modelValue:e.hue,"onUpdate:modelValue":o[0]||(o[0]=o=>e.hue=o),"aria-label":e.$t("app.colorPickerGradient.hueSlider"),min:0,max:.999,step:.001,"show-tooltip":!1,onInput:e.onInputHueSlider,onChange:e.onChangeHueSlider},null,8,["modelValue","aria-label","max","step","onInput","onChange"])])),[[c,e.onPointerDownHueSliderContainer,void 0,{tap:!0}]]),(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",{ref:"opacitySliderContainer",class:"ogr-color-picker-gradient__opacity",style:(0,l.normalizeStyle)({"--ogr-color-pick-opaque":e.pickedColorOpaqueStyle})},[(0,t.Wm)(u,{modelValue:e.opacity,"onUpdate:modelValue":o[1]||(o[1]=o=>e.opacity=o),"aria-label":e.$t("app.colorPickerGradient.opacitySlider"),min:0,max:1,step:.001,"show-tooltip":!1,onInput:e.onInputOpacitySlider,onChange:e.onChangeOpacitySlider},null,8,["modelValue","aria-label","step","onInput","onChange"])],4)),[[c,e.onPointerDownOpacitySliderContainer,void 0,{tap:!0}]])])}]]);var O=a(96492),G=a.n(O),I=a(9723);const M=(0,t.aZ)({name:"DockColorPicker",directives:{loading:m.ZP.directive},components:{AppColorPickerGradient:x,ElButton:p.ZP,ElDivider:v.ZP,ElInput:g.default,ElScrollbar:h.default,ElTooltip:C.default},props:{color:{type:Object,default:{is:"color",r:0,g:0,b:0,a:1,style:"#000000"}},isDialog:{type:Boolean,default:!1}},emits:["close","update:title"],setup(e,{emit:o}){o("update:title","dock.colorPicker.title");const a=(0,s.iH)({is:"color",r:0,g:0,b:0,a:1,style:"#000000"});let l="rgba";const n=(0,s.iH)(),i=(0,s.iH)();return(0,t.YP)([(0,s.Vh)(e,"color")],(([e])=>{l=(0,b.VT)(e),a.value=(0,b.cp)(e,l)}),{immediate:!0}),(0,t.YP)([a],(()=>{n.value=(0,b.hq)(a.value,"rgba"),i.value=G()(n.value,{pick:["ntc"]}).ntc[0]?.name}),{immediate:!0}),{workingColor:a,hexCode:n,colorName:i,onChangeHexCode:function(e){a.value=(0,b.uG)(e,"rgba")},onPickColorFromImage:function(){(0,I.Mz)("tmp","notYetImplemented")},onCancel:function(){o("close")},onConfirmSelection:function(){o("close",{color:JSON.parse(JSON.stringify(a.value))})}}}}),Z=(0,D.Z)(M,[["render",function(e,o,a,s,p,v){const g=(0,t.up)("app-color-picker-gradient"),m=(0,t.up)("el-input"),h=(0,t.up)("el-button"),C=(0,t.up)("el-divider");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",i,[(0,t.Wm)(g,{modelValue:e.workingColor,onInput:o[0]||(o[0]=o=>e.workingColor=o)},null,8,["modelValue"])]),(0,t._)("h2",r,(0,l.toDisplayString)(e.colorName),1),(0,t._)("div",u,[(0,t.Wm)(m,{modelValue:e.hexCode,"onUpdate:modelValue":o[1]||(o[1]=o=>e.hexCode=o),modelModifiers:{lazy:!0},style:{width:"7rem"},"aria-label":e.$t("dock.colorPicker.hexCode"),placeholder:e.$t("dock.colorPicker.hexCode"),onChange:e.onChangeHexCode},null,8,["modelValue","aria-label","placeholder","onChange"]),(0,t.Wm)(h,{"aria-label":e.$t("dock.colorPicker.pickColorFromImage"),class:"ml-3",onClick:e.onPickColorFromImage},{default:(0,t.w5)((()=>[c])),_:1},8,["aria-label","onClick"])]),e.isDialog?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Wm)(C),(0,t._)("div",d,[(0,t.Wm)(h,{onClick:e.onCancel},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.toDisplayString)(e.$t("button.cancel")),1)])),_:1},8,["onClick"]),(0,t.Wm)(h,{onClick:e.onConfirmSelection},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.toDisplayString)(e.$t("button.ok")),1)])),_:1},8,["onClick"])])],64)):(0,t.kq)("v-if",!0)])}]])}}]);