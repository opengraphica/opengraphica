"use strict";(self.webpackChunkOpenGraphica=self.webpackChunkOpenGraphica||[]).push([[1286],{48870:(e,a,t)=>{t.r(a),t.d(a,{convertLayersToImageSequence:()=>i});var r=t(67340),n=t(8778),c=t(19971),s=t(93249),u=t(9091),o=t(75930);async function i(e={}){let a=e.frameDelay||1;const t=(0,r.getLayersByType)("raster"),i={type:"rasterSequence",height:r.default.get("height"),name:"New Image Sequence",width:r.default.get("width"),data:{sequence:[]}};let l=0;if(t.length>0){for(let e of t){let t=new Image;await new Promise(((a,r)=>{t.onload=()=>{a()},t.onerror=()=>{r()},t.src=e.data.sourceImage?.src||""})),i.data?.sequence.push({start:l,end:Math.floor(l+a),image:{sourceImage:t,sourceImageIsObjectUrl:e.data.sourceImageIsObjectUrl},thumbnailImageSrc:null}),l=Math.floor(l+a)}i.data&&(i.data.currentFrame=i.data?.sequence[0].image),c.default.dispatch("setTimelineCursor",l),(0,c.updateRasterSequenceLayerWithTimeline)(i),n.Z.dispatch("runAction",{action:new s.x("convertLayersToImageSequence","action.convertLayersToImageSequence",[new u._(t.map((e=>e.id))),new o.D(i)])})}}}}]);