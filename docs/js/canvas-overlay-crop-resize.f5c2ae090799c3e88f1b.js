"use strict";(self.webpackChunkOpenGraphica=self.webpackChunkOpenGraphica||[]).push([[2184],{92606:(l,e,i)=>{i.r(e),i.d(e,{default:()=>C});var t=i(66252),a=i(3577),r=i(49963);const o={class:"ogr-canvas-overlay"},g={viewBox:"0 0 100 100"},h=["fill","stroke"],d={viewBox:"0 0 100 100"},s=["fill","stroke"],n={viewBox:"0 0 100 100"},H=["fill","stroke"],_={viewBox:"0 0 100 100"},T=["fill","stroke"],w={viewBox:"0 0 100 100"},c=["fill","stroke"],p=["fill","stroke"],v={viewBox:"0 0 100 100"},f=["fill","stroke"],D=["fill","stroke"],G={viewBox:"0 0 100 100"},P=["fill","stroke"],R=["fill","stroke"],L={viewBox:"0 0 100 100"},k=["fill","stroke"],E=["fill","stroke"];var u=i(2262),m=i(91648),Y=i(67340),A=i(86617);const y=(0,t.aZ)({name:"CanvasOverlayCropResize",emits:[],props:{},setup(l,{emit:e}){const i=(0,u.iH)(null),a=(0,u.iH)(1),{width:r,height:o}=(0,u.BK)(Y.default.state),g=(0,t.Fl)((()=>a.value*A.bf.value<100||a.value*A.Cb.value<100)),h=(0,t.Fl)((()=>a.value*A.Cb.value>=50)),d=(0,t.Fl)((()=>a.value*A.bf.value>=50));function s(l){l&&(null!=l.top&&(i.value.style.top=A.we+"px",A.we.value=l.top),null!=l.left&&(i.value.style.left=A.t$+"px",A.t$.value=l.left),null!=l.width&&(i.value.style.width=A.bf+"px",A.bf.value=l.width),null!=l.height&&(i.value.style.height=A.Cb+"px",A.Cb.value=l.height))}return(0,t.YP)((()=>m.Z.state.decomposedTransform),(l=>{let e=l.scaleX/window.devicePixelRatio;e!==a.value&&(a.value=e)}),{immediate:!0}),(0,t.bv)((()=>{A.D5.on("setCrop",s)})),(0,t.Ah)((()=>{A.D5.off("setCrop",s)})),{DRAG_TYPE_ALL:0,DRAG_TYPE_TOP:1,DRAG_TYPE_BOTTOM:2,DRAG_TYPE_LEFT:4,DRAG_TYPE_RIGHT:8,crop:i,zoom:a,top:A.we,left:A.t$,width:A.bf,height:A.Cb,isSmallHandles:g,showVerticalHandles:h,showHorizontalHandles:d,dragHandleHighlightColor:"#ecf5ff",dragHandleHighlightBorderColor:"#b3d8ff",dragHandleHighlight:A.G0,previewXSnap:A.Pt,previewYSnap:A.dD,fileWidth:r,fileHeight:o}}}),C=(0,i(83744).Z)(y,[["render",function(l,e,i,u,m,Y){return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",{ref:"crop",class:"ogr-crop",style:(0,a.normalizeStyle)({top:l.top+"px",left:l.left+"px",width:l.width+"px",height:l.height+"px"})},[(0,t._)("div",{class:"ogr-crop-bounds",style:(0,a.normalizeStyle)({outlineWidth:.35/l.zoom+"rem"})},null,4),(0,t._)("div",{class:"ogr-crop-handle-top",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",g,[l.showHorizontalHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 98.5 L98.5 98.5 L98.5 75 L1.5 75 Z",fill:l.dragHandleHighlight===l.DRAG_TYPE_TOP?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===l.DRAG_TYPE_TOP?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,h)):(0,t.kq)("v-if",!0)]))],4),(0,t._)("div",{class:"ogr-crop-handle-left",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",d,[l.showVerticalHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 98.5 L98.5 98.5 L98.5 75 L1.5 75 Z",fill:l.dragHandleHighlight===l.DRAG_TYPE_LEFT?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===l.DRAG_TYPE_LEFT?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,s)):(0,t.kq)("v-if",!0)]))],4),(0,t._)("div",{class:"ogr-crop-handle-bottom",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",n,[l.showHorizontalHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 98.5 L98.5 98.5 L98.5 75 L1.5 75 Z",fill:l.dragHandleHighlight===l.DRAG_TYPE_BOTTOM?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===l.DRAG_TYPE_BOTTOM?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,H)):(0,t.kq)("v-if",!0)]))],4),(0,t._)("div",{class:"ogr-crop-handle-right",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",_,[l.showVerticalHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 98.5 L98.5 98.5 L98.5 75 L1.5 75 Z",fill:l.dragHandleHighlight===l.DRAG_TYPE_RIGHT?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===l.DRAG_TYPE_RIGHT?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,T)):(0,t.kq)("v-if",!0)]))],4),(0,t._)("div",{class:"ogr-crop-handle-top-left",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",w,[l.isSmallHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 1.5 L25 1.5 L25 25 L1.5 25 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,c)):((0,t.wg)(),(0,t.iD)("path",{key:1,d:"M1.5 1.5 L98.5 1.5 L98.5 25 L25 25 L25 98.5 L1.5 98.5 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,p))]))],4),(0,t._)("div",{class:"ogr-crop-handle-top-right",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",v,[l.isSmallHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 1.5 L25 1.5 L25 25 L1.5 25 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,f)):((0,t.wg)(),(0,t.iD)("path",{key:1,d:"M1.5 1.5 L98.5 1.5 L98.5 25 L25 25 L25 98.5 L1.5 98.5 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_TOP|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,D))]))],4),(0,t._)("div",{class:"ogr-crop-handle-bottom-left",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",G,[l.isSmallHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 1.5 L25 1.5 L25 25 L1.5 25 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,P)):((0,t.wg)(),(0,t.iD)("path",{key:1,d:"M1.5 1.5 L98.5 1.5 L98.5 25 L25 25 L25 98.5 L1.5 98.5 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_LEFT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,R))]))],4),(0,t._)("div",{class:"ogr-crop-handle-bottom-right",style:(0,a.normalizeStyle)({transform:"scale("+1/l.zoom+")"})},[((0,t.wg)(),(0,t.iD)("svg",L,[l.isSmallHandles?((0,t.wg)(),(0,t.iD)("path",{key:0,d:"M1.5 1.5 L25 1.5 L25 25 L1.5 25 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,k)):((0,t.wg)(),(0,t.iD)("path",{key:1,d:"M1.5 1.5 L98.5 1.5 L98.5 25 L25 25 L25 98.5 L1.5 98.5 Z",fill:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightColor:"white",stroke:l.dragHandleHighlight===(l.DRAG_TYPE_BOTTOM|l.DRAG_TYPE_RIGHT)?l.dragHandleHighlightBorderColor:"#ccc","stroke-width":"3"},null,8,E))]))],4)],4),(0,t.wy)((0,t._)("div",{class:"ogr-snap-preview ogr-snap-preview-vertical",style:(0,a.normalizeStyle)({left:l.previewXSnap-1/l.zoom/2+"px",width:1/l.zoom+"px",height:l.fileHeight+"px"})},null,4),[[r.vShow,null!=l.previewXSnap]]),(0,t.wy)((0,t._)("div",{class:"ogr-snap-preview ogr-snap-preview-horizontal",style:(0,a.normalizeStyle)({top:l.previewYSnap-1/l.zoom/2+"px",height:1/l.zoom+"px",width:l.fileWidth+"px"})},null,4),[[r.vShow,null!=l.previewYSnap]])])}]])}}]);