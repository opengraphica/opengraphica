"use strict";(self.webpackChunkOpenGraphica=self.webpackChunkOpenGraphica||[]).push([[8444],{68444:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(2262),i=n(22053),u=n(84710),c=n(78835);const{multiTouchDownTimeout:s,multiTouchTapTimeout:r,pointerPressHoldTimeout:d}=(0,o.BK)(i.Z.state),a=new WeakMap,p=new WeakMap,h=new WeakMap;function f(e){let t="";for(let n in e.modifiers)!["primary","window"].includes(n)&&e.modifiers[n]&&(t=n);return t}function g(e,t,n){const o=p.get(e)||{};o[t]=n.value,p.set(e,o)}function w(e,t,n,o){const i=(p.get(e)||{})[t];i&&i.call(n.instance,o)}const l={async mounted(e,t){const n=f(t);g(e,n,t),"tap"===n?function(e,t){const n=a.get(e)||{};let o,i,c="",s=!1,d=!1;n.tap={mousedown:[e,function(e){c="mouse"}],mouseup:[e,function(e){d=!0,i=window.setTimeout((()=>{d=!1}),100)}],click:[e,function(n){"mouse"===c&&d&&w(e,"tap",t,(0,u.Sf)("pointerup",n))}],pointerdown:[e,function(e){"pen"===e.pointerType&&e.isPrimary&&(c="pen",s=!0,clearTimeout(o),o=window.setTimeout((()=>{s=!1}),r.value))}],pointerup:[e,function(n){"pen"===n.pointerType&&"pen"===c&&s&&w(e,"tap",t,n)}],touchstart:[e,function(e){for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t];(e.touches[0]&&e.touches[0].identifier===n.identifier||0===e.touches.length)&&(c="touch",s=!0,clearTimeout(o),o=window.setTimeout((()=>{s=!1}),r.value))}}],touchend:[e,function(n){if("touch"===c&&s)for(let o=0;o<n.changedTouches.length;o++){const i=n.changedTouches[o];(n.touches[0]&&n.touches[0].identifier===i.identifier||0===n.touches.length)&&w(e,"tap",t,(0,u.iZ)("pointerup",n)[0])}}]};for(let e in n.tap){const t=n.tap[e];t[0].addEventListener(e,t[1],!0)}a.set(e,n)}(e,t):"press"===n?function(e,t){const n=a.get(e)||{};let o,s="",r=!1,p=-1,h=-1;n.press={mousedown:[e,function(n){s="mouse",r=!0,p=n.pageX,h=n.pageY,clearTimeout(o),o=window.setTimeout((()=>{r=!1,w(e,"press",t,(0,u.Sf)("pointerdown",n))}),d.value)}],mousemove:[window,function(e){r&&"mouse"===s&&(0,c.y)(p,h,e.pageX,e.pageY)>i.Z.get("dragStartRadius")&&(clearTimeout(o),r=!1)}],mouseup:[e,function(e){clearTimeout(o),r=!1}],pointerdown:[e,function(n){"pen"===n.pointerType&&n.isPrimary&&(s="pen",r=!0,p=n.pageX,h=n.pageY,clearTimeout(o),o=window.setTimeout((()=>{r=!1,w(e,"press",t,n)}),d.value))}],pointermove:[window,function(e){r&&"pen"===s&&e.isPrimary&&(0,c.y)(p,h,e.pageX,e.pageY)>i.Z.get("dragStartRadius")&&(clearTimeout(o),r=!1)}],pointerup:[e,function(e){"pen"===e.pointerType&&"pen"===s&&r&&(clearTimeout(o),r=!1)}],touchstart:[e,function(n){for(let i=0;i<n.changedTouches.length;i++){const c=n.changedTouches[i];(n.touches[0]&&n.touches[0].identifier===c.identifier||0===n.touches.length)&&(s="touch",r=!0,p=n.touches[0].pageX,h=n.touches[0].pageY,clearTimeout(o),o=window.setTimeout((()=>{r=!1,w(e,"press",t,(0,u.iZ)("pointerdown",n)[0])}),d.value))}}],touchmove:[e,function(e){if(r&&"touch"===s)for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t];(e.touches[0]&&e.touches[0].identifier===n.identifier||0===e.touches.length)&&(0,c.y)(p,h,e.touches[0].pageX,e.touches[0].pageY)>i.Z.get("dragStartRadius")&&(clearTimeout(o),r=!1)}}],touchend:[e,function(e){if("touch"===s&&r)for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t];(e.touches[0]&&e.touches[0].identifier===n.identifier||0===e.touches.length)&&(clearTimeout(o),r=!1)}}]};for(let e in n.press){const t=n.press[e];t[0].addEventListener(e,t[1],!0)}a.set(e,n)}(e,t):["dragstart","dragend"].includes(n)?function(e,t,n){const o=h.get(e)||{};if(o.eventsAlreadySetup)return;o.eventsAlreadySetup=!0,h.set(e,o);const s=a.get(e)||{};let r,d=!1,p=null,f=-1,g=-1;s[t]={dragstart:[e,function(e){return e.preventDefault(),!1}],mousedown:[e,function(e){(0,u.u7)(e.target)||(r=e,p="mouse",f=e.pageX,g=e.pageY)}],mousemove:[window,function(t){"mouse"!==p||d||(0,c.y)(f,g,t.pageX,t.pageY)>i.Z.get("dragStartRadius")&&(d=!0,w(e,"dragstart",n,(0,u.Sf)("pointerdown",r)))}],mouseup:[window,function(t){"mouse"===p&&(p=null,d&&(d=!1,w(e,"dragend",n,(0,u.Sf)("pointerup",t))))}],pointerdown:[e,function(e){(0,u.u7)(e.target)||"pen"===e.pointerType&&e.isPrimary&&(r=e,p="pen",f=e.pageX,g=e.pageY)}],pointermove:[window,function(t){"pen"===p&&t.isPrimary&&!d&&(0,c.y)(f,g,t.pageX,t.pageY)>i.Z.get("dragStartRadius")&&(d=!0,w(e,"dragstart",n,r))}],pointerup:[window,function(t){"pen"===t.pointerType&&(p=null,d&&(d=!1,w(e,"dragend",n,t)))}],touchstart:[e,function(e){for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t];if(e.touches[0]&&e.touches[0].identifier===n.identifier||0===e.touches.length){if((0,u.u7)(e.touches[0].target))return;r=e,p="touch",f=e.touches[0].pageX,g=e.touches[0].pageY}}}],touchmove:[window,function(t){if("touch"===p&&!d)for(let o=0;o<t.changedTouches.length;o++){const s=t.changedTouches[o];(t.touches[0]&&t.touches[0].identifier===s.identifier||0===t.touches.length)&&(0,c.y)(f,g,t.touches[0].pageX,t.touches[0].pageY)>i.Z.get("dragStartRadius")&&(d=!0,w(e,"dragstart",n,(0,u.iZ)("pointerdown",r)[0]))}}],touchend:[window,function(t){for(let o=0;o<t.changedTouches.length;o++){const i=t.changedTouches[o];(t.touches[0]&&t.touches[0].identifier===i.identifier||0===t.touches.length)&&(p=null,d&&(d=!1,w(e,"dragend",n,(0,u.iZ)("pointerup",t)[0])))}}]};for(let e in s[t]){const n=s[t][e];n[0].addEventListener(e,n[1],!0)}a.set(e,s)}(e,n,t):"down"===n?function(e,t){const n=a.get(e)||{};function o(n){w(e,"down",t,(0,u.Sf)("pointerdown",n))}function i(n){"pen"===n.pointerType&&w(e,"down",t,n)}function c(n){for(let o=0;o<n.changedTouches.length;o++)w(e,"down",t,(0,u.iZ)("pointerdown",n)[0])}t.modifiers.window?n.down={mousedown:[window,o],pointerdown:[window,i],touchstart:[window,c]}:n.down={mousedown:[e,o],pointerdown:[e,i],touchstart:[e,c]};for(let e in n.down){const t=n.down[e];t[0].addEventListener(e,t[1],!0)}a.set(e,n)}(e,t):"move"===n?function(e,t){const n=a.get(e)||{};n.move={mousemove:[t.modifiers.window?window:e,function(n){w(e,"move",t,(0,u.Sf)("pointermove",n))}],pointermove:[t.modifiers.window?window:e,function(n){"pen"===n.type&&w(e,"move",t,n)}],touchmove:[t.modifiers.window?window:e,function(n){const o=(0,u.iZ)("pointermove",n);for(const n of o)w(e,"move",t,n)}]};for(let e in n.move){const t=n.move[e];t[0].addEventListener(e,t[1],!0)}a.set(e,n)}(e,t):"up"===n&&function(e,t){const n=a.get(e)||{};function o(n){w(e,"up",t,(0,u.Sf)("pointerup",n))}function i(n){"pen"===n.pointerType&&w(e,"up",t,n)}function c(n){for(let o=0;o<n.changedTouches.length;o++)w(e,"up",t,(0,u.iZ)("pointerup",n)[0])}t.modifiers.window?n.up={mouseup:[window,o],pointerup:[window,i],touchend:[window,c]}:n.up={mouseup:[e,o],pointerup:[e,i],touchend:[e,c]};for(let e in n.up){const t=n.up[e];t[0].addEventListener(e,t[1],!0)}a.set(e,n)}(e,t)},async updated(e,t){g(e,f(t),t)},async unmounted(e,t){const n=f(t),o=a.get(e)||{};for(let e in o[n]){const t=o[n][e];t[0].removeEventListener(e,t[1])}delete o[n],0===Object.keys(o).length?a.delete(e):a.set(e,o)}}}}]);