"use strict";(self.webpackChunkOpenGraphica=self.webpackChunkOpenGraphica||[]).push([[6240],{75913:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(66252);const s={ref:"overlay",class:"ogr-canvas-overlay is-full-canvas-area"},i={ref:"selectionContainer",class:"ogr-selection"},n=["width","height"],o=["d","stroke-width"],l=["d","stroke-width","stroke-dasharray"];var h=a(2262),d=a(75710),v=a(91648),c=a(67340);const g=(0,r.aZ)({name:"CanvasOverlaySelection",setup(e,{emit:t}){const a=window.devicePixelRatio||1,{transform:s,viewWidth:i,viewHeight:n,viewDirty:o}=(0,h.BK)(v.Z.state),{selectedLayerIds:l}=(0,h.BK)(c.default.state),g=(0,h.iH)(null),u=(0,r.Fl)((()=>v.Z.state.decomposedTransform.scaleX/a)),w=(0,r.Fl)((()=>2)),y=(0,r.Fl)((()=>5)),f=(0,r.Fl)((()=>i.value/a)),p=(0,r.Fl)((()=>n.value/a));let k=(0,h.iH)([]);(0,r.YP)([d.iU,o],(()=>{k.value=[];for(const e of d.iU.value){const t=new DOMPoint(e.x,e.y).matrixTransform(s.value);let r=t,i=t;"quadraticBezierCurve"===e.type&&(r=new DOMPoint(e.shx,e.shy).matrixTransform(s.value),i=new DOMPoint(e.ehx,e.ehy).matrixTransform(s.value)),k.value.push({type:e.type,x:t.x/a,y:t.y/a,shx:r.x/a,shy:r.y/a,ehx:i.x/a,ehy:i.y/a})}}));const x=(0,r.Fl)((()=>{const e=k.value;let t="M"+e[0].x+" "+e[0].y;for(let a=1;a<e.length;a++){const r=e[a];"line"===r.type?t+=" L "+r.x+" "+r.y:"quadraticBezierCurve"===r.type&&(t+=" C "+r.shx+" "+r.shy+", "+r.ehx+" "+r.ehy+", "+r.x+" "+r.y)}return t+=" z",t}));return(0,r.bv)((()=>{})),(0,r.Ah)((()=>{})),{isDrawingSelection:d.wN,transformedactiveSelectionPath:k,selectedLayerIds:l,selectionContainer:g,svgPathDraw:x,svgPathStrokeWidth:w,svgHandleWidth:y,svgBoundsWidth:f,svgBoundsHeight:p,zoom:u,dragHandleHighlightColor:"#ecf5ff",dragHandleHighlightBorderColor:"#b3d8ff"}}}),u=(0,a(83744).Z)(g,[["render",function(e,t,a,h,d,v){return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",i,[e.transformedactiveSelectionPath.length>0?((0,r.wg)(),(0,r.iD)("svg",{key:0,width:e.svgBoundsWidth,height:e.svgBoundsHeight,xmlns:"http://www.w3.org/2000/svg"},[(0,r._)("path",{d:e.svgPathDraw,stroke:"#333333","stroke-width":e.svgPathStrokeWidth,fill:"transparent"},null,8,o),(0,r._)("path",{d:e.svgPathDraw,stroke:"white","stroke-width":.8*e.svgPathStrokeWidth,"stroke-dasharray":2*e.svgPathStrokeWidth,fill:"transparent"},null,8,l),(0,r.kq)("v-if",!0)],8,n)):(0,r.kq)("v-if",!0)],512)],512)}]])}}]);